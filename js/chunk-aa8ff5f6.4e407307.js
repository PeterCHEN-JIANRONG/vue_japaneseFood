(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-aa8ff5f6"],{"00b4":function(e,t,a){"use strict";a("ac1f");var c=a("23e7"),n=a("da84"),r=a("c65b"),l=a("e330"),o=a("1626"),s=a("861d"),d=function(){var e=!1,t=/[ac]/;return t.exec=function(){return e=!0,/./.exec.apply(this,arguments)},!0===t.test("abc")&&e}(),i=n.Error,m=l(/./.test);c({target:"RegExp",proto:!0,forced:!d},{test:function(e){var t=this.exec;if(!o(t))return m(this,e);var a=r(t,this,e);if(null!==a&&!s(a))throw new i("RegExp exec method returned something other than an Object or null");return!!a}})},"0e28":function(e,t,a){"use strict";var c=a("7a23"),n={class:"row mb-0"},r={class:"col"},l=Object(c["createElementVNode"])("small",{class:"fs-5"},"STEP 1.",-1),o=Object(c["createElementVNode"])("h3",null,"填寫訂單",-1),s=[l,o],d={class:"col"},i=Object(c["createElementVNode"])("small",{class:"fs-5"},"STEP 2.",-1),m=Object(c["createElementVNode"])("h3",null,"訂單付款",-1),u=[i,m],b={class:"col"},f=Object(c["createElementVNode"])("small",{class:"fs-5"},"STEP 3.",-1),p=Object(c["createElementVNode"])("h3",null,"付款完成",-1),O=[f,p];function j(e,t,a,l,o,i){return Object(c["openBlock"])(),Object(c["createElementBlock"])("ul",n,[Object(c["createElementVNode"])("li",r,[Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])(["text-center py-2",{"text-white bg-primary":1===a.step,"text-muted bg-secondary":1!==a.step}])},s,2)]),Object(c["createElementVNode"])("li",d,[Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])(["text-center py-2",{"text-white bg-primary":2===a.step,"text-muted bg-secondary":2!==a.step}])},u,2)]),Object(c["createElementVNode"])("li",b,[Object(c["createElementVNode"])("div",{class:Object(c["normalizeClass"])(["text-center py-2",{"text-white bg-primary":3===a.step,"text-muted bg-secondary":3!==a.step}])},O,2)])])}a("a9e3");var N={props:{step:{type:Number,default:1}}},V=a("6b0d"),E=a.n(V);const g=E()(N,[["render",j]]);t["a"]=g},"1ca2":function(e,t,a){"use strict";a.r(t);a("b0c0"),a("b64b");var c=a("7a23"),n=function(e){return Object(c["pushScopeId"])("data-v-58dcf5f8"),e=e(),Object(c["popScopeId"])(),e},r=n((function(){return Object(c["createElementVNode"])("div",{class:"banner position-relative mb-4"},[Object(c["createElementVNode"])("div",{class:"container position-absolute top-50 start-50 translate-middle text-center"},[Object(c["createElementVNode"])("h1",{class:"text-white"},"付款流程"),Object(c["createElementVNode"])("h2",{class:"h4 text-white"},"確認商品數量、金額及套用優惠券，完成付款吧！")])],-1)})),l={class:"container mb-4"},o={class:"container mb-5"},s={class:"row row-cols-1 row-cols-md-2 g-4"},d={class:"col"},i={class:""},m={class:"table align-middle text-center table-striped table-hover mb-4"},u=n((function(){return Object(c["createElementVNode"])("thead",null,[Object(c["createElementVNode"])("tr",{class:"table-secondary"},[Object(c["createElementVNode"])("th",{style:{"min-width":"80px"},class:"d-none d-md-table-cell"},"圖片"),Object(c["createElementVNode"])("th",null,"商品名稱"),Object(c["createElementVNode"])("th",{class:"d-none d-sm-table-cell d-md-none d-lg-table-cell"},"單價"),Object(c["createElementVNode"])("th",null,"數量"),Object(c["createElementVNode"])("th",null,"小計")])],-1)})),b={class:"d-none d-md-table-cell"},f=["src","alt"],p=["src","alt"],O={key:0,class:"text-success"},j={class:"d-none d-sm-table-cell d-md-none d-lg-table-cell"},N={class:"d-none d-sm-inline"},V=n((function(){return Object(c["createElementVNode"])("td",{class:"d-none d-md-table-cell"},null,-1)})),E=n((function(){return Object(c["createElementVNode"])("td",{class:"d-none d-sm-table-cell d-md-none d-lg-table-cell"},null,-1)})),g={key:0},h=n((function(){return Object(c["createElementVNode"])("td",{class:"d-none d-md-table-cell"},null,-1)})),v=n((function(){return Object(c["createElementVNode"])("td",{class:"d-none d-sm-table-cell d-md-none d-lg-table-cell"},null,-1)})),x=n((function(){return Object(c["createElementVNode"])("td",{colspan:"2",class:"text-end fs-6 text-muted"},"折扣",-1)})),y={class:"fs-6 text-muted"},k={key:1},C=n((function(){return Object(c["createElementVNode"])("td",{class:"d-none d-md-table-cell"},null,-1)})),S=n((function(){return Object(c["createElementVNode"])("td",{class:"d-none d-sm-table-cell d-md-none d-lg-table-cell"},null,-1)})),w=n((function(){return Object(c["createElementVNode"])("td",{colspan:"2",class:"text-end fs-4"},"折扣價",-1)})),D={class:"fs-4"},_={class:"input-group input-group-sm"},I={class:"input-group-append"},T={class:"col"},B={class:"bg-light py-4"},L={class:"row justify-content-center"},$={class:"col-lg-8"},M={class:"form-floating mb-3"},F=n((function(){return Object(c["createElementVNode"])("label",{for:"email",class:"form-label"},[Object(c["createTextVNode"])("Email"),Object(c["createElementVNode"])("span",{class:"text-danger"},"*")],-1)})),U={class:"form-floating mb-3"},z=n((function(){return Object(c["createElementVNode"])("label",{for:"name",class:"form-label"},[Object(c["createTextVNode"])("姓名"),Object(c["createElementVNode"])("span",{class:"text-danger"},"*")],-1)})),A={class:"form-floating mb-3"},P=n((function(){return Object(c["createElementVNode"])("label",{for:"tel",class:"form-label"},[Object(c["createTextVNode"])("電話"),Object(c["createElementVNode"])("span",{class:"text-danger"},"*")],-1)})),R={class:"form-floating mb-3"},q=n((function(){return Object(c["createElementVNode"])("label",{for:"address",class:"form-label"},[Object(c["createTextVNode"])("地址"),Object(c["createElementVNode"])("span",{class:"text-danger"},"*")],-1)})),G={class:"form-floating mb-3"},X=n((function(){return Object(c["createElementVNode"])("label",{for:"message"},"留言",-1)})),J={class:"text-end"},Y=["disabled"];function H(e,t,a,n,H,K){var Q=Object(c["resolveComponent"])("Loading"),W=Object(c["resolveComponent"])("OrderProgress"),Z=Object(c["resolveComponent"])("Field"),ee=Object(c["resolveComponent"])("ErrorMessage"),te=Object(c["resolveComponent"])("Form");return Object(c["openBlock"])(),Object(c["createElementBlock"])(c["Fragment"],null,[Object(c["createVNode"])(Q,{active:H.isLoading},null,8,["active"]),r,Object(c["createElementVNode"])("div",l,[Object(c["createVNode"])(W,{step:H.step},null,8,["step"])]),Object(c["createElementVNode"])("div",o,[Object(c["createElementVNode"])("div",s,[Object(c["createElementVNode"])("div",d,[Object(c["createElementVNode"])("div",i,[Object(c["createElementVNode"])("table",m,[u,Object(c["createElementVNode"])("tbody",null,[(Object(c["openBlock"])(!0),Object(c["createElementBlock"])(c["Fragment"],null,Object(c["renderList"])(H.cartData.carts,(function(t){return Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",{key:t.id},[Object(c["createElementVNode"])("td",b,[t.product.imageUrlSmall?(Object(c["openBlock"])(),Object(c["createElementBlock"])("img",{key:0,src:t.product.imageUrlSmall,class:"img__small img-cover w-100",alt:t.product.title},null,8,f)):(Object(c["openBlock"])(),Object(c["createElementBlock"])("img",{key:1,src:t.product.imageUrl,class:"img__small img-cover w-100",alt:t.product.title},null,8,p))]),Object(c["createElementVNode"])("td",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.product.title)+" ",1),t.coupon?(Object(c["openBlock"])(),Object(c["createElementBlock"])("div",O,"套用優惠券")):Object(c["createCommentVNode"])("",!0)]),Object(c["createElementVNode"])("td",j,Object(c["toDisplayString"])(t.product.price),1),Object(c["createElementVNode"])("td",null,[Object(c["createTextVNode"])(Object(c["toDisplayString"])(t.qty)+" ",1),Object(c["createElementVNode"])("span",N,Object(c["toDisplayString"])(t.product.unit),1)]),Object(c["createElementVNode"])("td",null,Object(c["toDisplayString"])(e.$filters.currency(t.total)),1)])})),128))]),Object(c["createElementVNode"])("tfoot",null,[Object(c["createElementVNode"])("tr",null,[V,E,Object(c["createElementVNode"])("td",{colspan:"2",class:Object(c["normalizeClass"])(["text-end",{"fs-6 text-muted":H.cartData.final_total!==H.cartData.total,"fs-4":H.cartData.final_total===H.cartData.total}])}," 總計 ",2),Object(c["createElementVNode"])("td",{class:Object(c["normalizeClass"])({"fs-6 text-muted":H.cartData.final_total!==H.cartData.total,"fs-4":H.cartData.final_total===H.cartData.total})},Object(c["toDisplayString"])(e.$filters.currency(H.cartData.total)),3)]),H.cartData.final_total!==H.cartData.total?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",g,[h,v,x,Object(c["createElementVNode"])("td",y,Object(c["toDisplayString"])("".concat(H.cartData.final_total-H.cartData.total)),1)])):Object(c["createCommentVNode"])("",!0),H.cartData.final_total!==H.cartData.total?(Object(c["openBlock"])(),Object(c["createElementBlock"])("tr",k,[C,S,w,Object(c["createElementVNode"])("td",D,Object(c["toDisplayString"])(H.cartData.final_total),1)])):Object(c["createCommentVNode"])("",!0)])])]),Object(c["createElementVNode"])("div",_,[Object(c["withDirectives"])(Object(c["createElementVNode"])("input",{type:"text",class:"form-control","onUpdate:modelValue":t[0]||(t[0]=function(e){return H.couponCode=e}),placeholder:"請輸入優惠碼"},null,512),[[c["vModelText"],H.couponCode]]),Object(c["createElementVNode"])("div",I,[Object(c["createElementVNode"])("button",{class:"btn btn-secondary",type:"button",onClick:t[1]||(t[1]=function(){return K.addCouponCode&&K.addCouponCode.apply(K,arguments)})}," 套用優惠碼 ")])])]),Object(c["createElementVNode"])("div",T,[Object(c["createElementVNode"])("div",B,[Object(c["createElementVNode"])("div",L,[Object(c["createElementVNode"])("div",$,[Object(c["createVNode"])(te,{ref:"form",class:"",onSubmit:K.createOrder},{default:Object(c["withCtx"])((function(e){var a,n=e.errors;return[Object(c["createElementVNode"])("div",M,[Object(c["createVNode"])(Z,{id:"email",name:"email",type:"email",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":n["email"]}]),placeholder:"請輸入 Email",modelValue:H.form.user.email,"onUpdate:modelValue":t[2]||(t[2]=function(e){return H.form.user.email=e}),rules:"email|required"},null,8,["class","modelValue"]),F,Object(c["createVNode"])(ee,{name:"email",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",U,[Object(c["createVNode"])(Z,{id:"name",name:"姓名",type:"text",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":n["姓名"]}]),placeholder:"請輸入姓名",modelValue:H.form.user.name,"onUpdate:modelValue":t[3]||(t[3]=function(e){return H.form.user.name=e}),rules:"required"},null,8,["class","modelValue"]),z,Object(c["createVNode"])(ee,{name:"姓名",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",A,[Object(c["createVNode"])(Z,{id:"tel",name:"電話",type:"text",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":n["電話"]}]),placeholder:"請輸入電話",modelValue:H.form.user.tel,"onUpdate:modelValue":t[4]||(t[4]=function(e){return H.form.user.tel=e}),rules:K.isPhone},null,8,["class","modelValue","rules"]),P,Object(c["createVNode"])(ee,{name:"電話",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",R,[Object(c["createVNode"])(Z,{id:"address",name:"地址",type:"text",class:Object(c["normalizeClass"])(["form-control",{"is-invalid":n["地址"]}]),placeholder:"請輸入地址",modelValue:H.form.user.address,"onUpdate:modelValue":t[5]||(t[5]=function(e){return H.form.user.address=e}),rules:"required"},null,8,["class","modelValue"]),q,Object(c["createVNode"])(ee,{name:"地址",class:"invalid-feedback"})]),Object(c["createElementVNode"])("div",G,[Object(c["withDirectives"])(Object(c["createElementVNode"])("textarea",{class:"form-control textarea__message",placeholder:"Leave a comment here",id:"message","onUpdate:modelValue":t[6]||(t[6]=function(e){return H.form.message=e})},null,512),[[c["vModelText"],H.form.message]]),X]),Object(c["createElementVNode"])("div",J,[Object(c["createElementVNode"])("button",{type:"submit",class:"btn btn-primary btn-lg w-100",disabled:0===(null===(a=H.cartData.carts)||void 0===a?void 0:a.length)||Object.keys(n).length>0}," 送出訂單 ",8,Y)])]})),_:1},8,["onSubmit"])])])])])])])],64)}a("99af"),a("ac1f"),a("00b4");var K=a("6be2"),Q=a("0e28"),W={data:function(){return{cartData:{},isLoading:!1,form:{user:{name:"",email:"",tel:"",address:""},message:""},couponCode:"",step:1}},components:{OrderProgress:Q["a"]},methods:{getCart:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("peter_vue2022","/cart");this.isLoading=!0,this.$http.get(t).then((function(t){e.isLoading=!1,e.cartData=t.data.data})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"錯誤訊息")}))},createOrder:function(){var e=this;this.isLoading=!0;var t="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("peter_vue2022","/order");this.$http.post(t,{data:this.form}).then((function(t){e.isLoading=!1,e.$refs.form.resetForm(),e.form.message="",K["a"].emit("get-cart"),e.$httpMessageState(t,t.data.message);var a=t.data.orderId;e.$router.push("/checkout/".concat(a))})).catch((function(t){e.$httpMessageState(t.response,"建立訂單")}))},addCouponCode:function(){var e=this,t="".concat("https://vue3-course-api.hexschool.io/v2/","/api/").concat("peter_vue2022","/coupon"),a={code:this.couponCode};this.isLoading=!0,this.$http.post(t,{data:a}).then((function(t){e.isLoading=!1,e.$httpMessageState(t,"套用優惠券"),e.getCart()})).catch((function(t){e.isLoading=!1,e.$httpMessageState(t.response,"加入優惠券")}))},isPhone:function(e){if(""===e)return"電話為必填";if(10!==e.length)return"電話須為 10 碼，ex: 0900777888";var t=/^(09)[0-9]{8}$/;return!!t.test(e)||"需要正確的電話號碼，ex: 0900111222"}},mounted:function(){this.getCart()}},Z=(a("be8d"),a("6b0d")),ee=a.n(Z);const te=ee()(W,[["render",H],["__scopeId","data-v-58dcf5f8"]]);t["default"]=te},5899:function(e,t){e.exports="\t\n\v\f\r                　\u2028\u2029\ufeff"},"58a8":function(e,t,a){var c=a("e330"),n=a("1d80"),r=a("577e"),l=a("5899"),o=c("".replace),s="["+l+"]",d=RegExp("^"+s+s+"*"),i=RegExp(s+s+"*$"),m=function(e){return function(t){var a=r(n(t));return 1&e&&(a=o(a,d,"")),2&e&&(a=o(a,i,"")),a}};e.exports={start:m(1),end:m(2),trim:m(3)}},7156:function(e,t,a){var c=a("1626"),n=a("861d"),r=a("d2bb");e.exports=function(e,t,a){var l,o;return r&&c(l=t.constructor)&&l!==a&&n(o=l.prototype)&&o!==a.prototype&&r(e,o),e}},"99af":function(e,t,a){"use strict";var c=a("23e7"),n=a("da84"),r=a("d039"),l=a("e8b5"),o=a("861d"),s=a("7b0b"),d=a("07fa"),i=a("8418"),m=a("65f0"),u=a("1dde"),b=a("b622"),f=a("2d00"),p=b("isConcatSpreadable"),O=9007199254740991,j="Maximum allowed index exceeded",N=n.TypeError,V=f>=51||!r((function(){var e=[];return e[p]=!1,e.concat()[0]!==e})),E=u("concat"),g=function(e){if(!o(e))return!1;var t=e[p];return void 0!==t?!!t:l(e)},h=!V||!E;c({target:"Array",proto:!0,forced:h},{concat:function(e){var t,a,c,n,r,l=s(this),o=m(l,0),u=0;for(t=-1,c=arguments.length;t<c;t++)if(r=-1===t?l:arguments[t],g(r)){if(n=d(r),u+n>O)throw N(j);for(a=0;a<n;a++,u++)a in r&&i(o,u,r[a])}else{if(u>=O)throw N(j);i(o,u++,r)}return o.length=u,o}})},a9e3:function(e,t,a){"use strict";var c=a("83ab"),n=a("da84"),r=a("e330"),l=a("94ca"),o=a("6eeb"),s=a("1a2d"),d=a("7156"),i=a("3a9b"),m=a("d9b5"),u=a("c04e"),b=a("d039"),f=a("241c").f,p=a("06cf").f,O=a("9bf2").f,j=a("408a"),N=a("58a8").trim,V="Number",E=n[V],g=E.prototype,h=n.TypeError,v=r("".slice),x=r("".charCodeAt),y=function(e){var t=u(e,"number");return"bigint"==typeof t?t:k(t)},k=function(e){var t,a,c,n,r,l,o,s,d=u(e,"number");if(m(d))throw h("Cannot convert a Symbol value to a number");if("string"==typeof d&&d.length>2)if(d=N(d),t=x(d,0),43===t||45===t){if(a=x(d,2),88===a||120===a)return NaN}else if(48===t){switch(x(d,1)){case 66:case 98:c=2,n=49;break;case 79:case 111:c=8,n=55;break;default:return+d}for(r=v(d,2),l=r.length,o=0;o<l;o++)if(s=x(r,o),s<48||s>n)return NaN;return parseInt(r,c)}return+d};if(l(V,!E(" 0o1")||!E("0b1")||E("+0x1"))){for(var C,S=function(e){var t=arguments.length<1?0:E(y(e)),a=this;return i(g,a)&&b((function(){j(a)}))?d(Object(t),a,S):t},w=c?f(E):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,isFinite,isInteger,isNaN,isSafeInteger,parseFloat,parseInt,fromString,range".split(","),D=0;w.length>D;D++)s(E,C=w[D])&&!s(S,C)&&O(S,C,p(E,C));S.prototype=g,g.constructor=S,o(n,V,S)}},b0c0:function(e,t,a){var c=a("83ab"),n=a("5e77").EXISTS,r=a("e330"),l=a("9bf2").f,o=Function.prototype,s=r(o.toString),d=/function\b(?:\s|\/\*[\S\s]*?\*\/|\/\/[^\n\r]*[\n\r]+)*([^\s(/]*)/,i=r(d.exec),m="name";c&&!n&&l(o,m,{configurable:!0,get:function(){try{return i(d,s(this))[1]}catch(e){return""}}})},be8d:function(e,t,a){"use strict";a("c9f9")},c9f9:function(e,t,a){}}]);
//# sourceMappingURL=chunk-aa8ff5f6.4e407307.js.map